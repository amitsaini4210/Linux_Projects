nagiOS server configuration



üîπ Permanent (Survives Reboot) ‚úÖ

sudo vi /etc/selinux/config
Change:
SELINUX=enforcing    --> SELINUX=permissive


dnf update -y

1Ô∏è‚É£ Install Nagios Server (RHEL)

dnf install @php @perl @httpd wget unzip glibc automake glibc-common
gettext autoconf php php-cli gcc gd gd-devel net-snmp openssl-devel 
unzip net-snmp postfix net-snmp-utils -yƒ±



dnf groupinstall "development tools" -y   (for compilation)


systemctl enable --now httpd php-fpm

systemctl status httpd php-fpm

if install any speciific version
export VER="4.4.6"

Download & Install Nagios Core:--
wget https://assets.nagios.com/downloads/nagioscore/releases/nagios-4.4.14.tar.gz
tar -xvf nagios-4.4.14.tar.gz
cd nagios-4.4.14
./configure --with-command-group=nagcmd

make all


make install-groups-users
groupadd -r nagios
useradd -g nagios nagios
usermod -aG nagios apache


install nagios base:
make install


set services for boot time:--
make install-daemoninit


set permission on groups:--
make install-commandmode


for configuration:--
make install-config

for access in web browser:--
make install-webconf


use for nagios web interface:---
make install-exfoliation


make install-classicui



set password for nagios admin:--
htpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin



systemctl restart httpd 



change location cd ~


if install any specific version
VER="2.3.3"


2Ô∏è‚É£ Install Nagios Plugins

wget https://nagios-plugins.org/download/nagios-plugins-2.4.6.tar.gz
tar -xvf nagios-plugins-2.4.6.tar.gz

cd nagios-plugins-2.4.6
./configure

make
make install



verify installtion:--
/usr/local/nagios/bin/nagios  -v /usr/local/nagios/etc/nagios.cfg


systemctl enable --now nagios

systemctl status nagios



firewall-cmd --permanent --add-services={http,https}
firewall-cmd --reload


in webbrowser:--
<serverip>/nagios

******************************************************************************************************************************************************************************************************************************************

nagios client setup

vim /etc/hosts


üîπ Permanent (Survives Reboot) ‚úÖ

sudo vi /etc/selinux/config
Change:
SELINUX=enforcing    --> SELINUX=permissive


dnf update -y

dnf install -y gcc glibc glibc-common openssl openssl-devel perl wget

not important do any location 
cd /usr/src

wget https://github.com/NagiosEnterprises/nrpe/releases/download/nrpe-4.1.0/nrpe-4.1.0.tar.gz
tar -xvf nrpe-4.1.0.tar.gz

cd nrpe
./configure


compilation:--
make all


make install-groups-users
groupadd -r nagios
useradd -r -g nagios nagios


make install


make install-config



update services file:--
sh -c "echo >> /etc/services"

sh -c "sudo echo '# nagios services' >> /etc/services"


define port:--
sh -c "sudo echo 'nrpe 5666/tcp' >> /etc/services"



make install-init


systemctl enable nrpe


vim /usr/local/nagios/etc/nrpe.conf

allowed_hosts=127.0.0.1  ,192.168.0.6
dont_blame-nrpe=1


uncomment lines:--    MISC system metrics    --all line
uncomment lines:--    Generic services    --all line
uncomment lines:--    system updates    --all line
uncomment lines:--    processes   --all line
uncomment lines:--    open files    --all line
uncomment lines:--    network connections    --all line



firewall-cmd --permanent --add-port=5666/tcp
firewall-cmd --reload


systemctl start nrpe

*******************************************************************************************************************
back to server


mkdir /usr/local/nagios/etc/servers


chown -R nagios:nagios  /usr/local/nagios/etc/servers
































